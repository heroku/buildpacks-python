#!/usr/bin/env bash

# Check that:
# - The correct env vars are set for later buildpacks.
# - Python's sys.path is correct.
# - The correct version of pip was installed, into its own layer.
# - Both the package manager and Python can find the typing-extensions package.
# - The typing-extensions package was installed into a separate dependencies layer.

set -euo pipefail

echo
echo "## Testing buildpack ##"

printenv | sort | grep -vE '^(_|CNB_.+|HOME|HOSTNAME|OLDPWD|PWD|SHLVL)='
echo
python -c 'import pprint, sys; pprint.pp(sys.path)'
echo
pip --version
pip list
python -c 'import typing_extensions; print(typing_extensions)'
